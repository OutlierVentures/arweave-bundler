(()=>{var t={47:(t,e,r)=>{var n=r(353);t.exports=function(t,e){return new Promise((function(r,s){var i,o=e||{};function a(t){s(t||new Error("Aborted"))}function c(t,e){t.bail?a(t):i.retry(t)?o.onRetry&&o.onRetry(t,e):s(i.mainError())}"randomize"in o||(o.randomize=!0),(i=n.operation(o)).attempt((function(e){var n;try{n=t(a,e)}catch(t){return void c(t,e)}Promise.resolve(n).then(r).catch((function(t){c(t,e)}))}))}))}},742:(t,e)=>{"use strict";e.b$=function(t){var e,r,i=a(t),o=i[0],c=i[1],u=new s(function(t,e,r){return 3*(e+r)/4-r}(0,o,c)),h=0,l=c>0?o-4:o;for(r=0;r<l;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],u[h++]=e>>16&255,u[h++]=e>>8&255,u[h++]=255&e;2===c&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,u[h++]=255&e);1===c&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,u[h++]=e>>8&255,u[h++]=255&e);return u},e.JQ=function(t){for(var e,n=t.length,s=n%3,i=[],o=16383,a=0,u=n-s;a<u;a+=o)i.push(c(t,a,a+o>u?u:a+o));1===s?(e=t[n-1],i.push(r[e>>2]+r[e<<4&63]+"==")):2===s&&(e=(t[n-2]<<8)+t[n-1],i.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return i.join("")};for(var r=[],n=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)r[o]=i[o],n[i.charCodeAt(o)]=o;function a(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function c(t,e,n){for(var s,i,o=[],a=e;a<n;a+=3)s=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(r[(i=s)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},353:(t,e,r)=>{t.exports=r(846)},846:(t,e,r)=>{var n=r(960);e.operation=function(t){var r=e.timeouts(t);return new n(r,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},e.timeouts=function(t){if(t instanceof Array)return[].concat(t);var e={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in t)e[r]=t[r];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],s=0;s<e.retries;s++)n.push(this.createTimeout(s,e));return t&&t.forever&&!n.length&&n.push(this.createTimeout(s,e)),n.sort((function(t,e){return t-e})),n},e.createTimeout=function(t,e){var r=e.randomize?Math.random()+1:1,n=Math.round(r*Math.max(e.minTimeout,1)*Math.pow(e.factor,t));return n=Math.min(n,e.maxTimeout)},e.wrap=function(t,r,n){if(r instanceof Array&&(n=r,r=null),!n)for(var s in n=[],t)"function"==typeof t[s]&&n.push(s);for(var i=0;i<n.length;i++){var o=n[i],a=t[o];t[o]=function(n){var s=e.operation(r),i=Array.prototype.slice.call(arguments,1),o=i.pop();i.push((function(t){s.retry(t)||(t&&(arguments[0]=s.mainError()),o.apply(this,arguments))})),s.attempt((function(){n.apply(t,i)}))}.bind(t,a),t[o].options=r}}},960:t=>{function e(t,e){"boolean"==typeof e&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}t.exports=e,e.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},e.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},e.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=(new Date).getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(void 0===r){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1)}var n=this;return this._timer=setTimeout((function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout((function(){n._operationTimeoutCb(n._attempts)}),n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)}),r),this._options.unref&&this._timer.unref(),!0},e.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){r._operationTimeoutCb()}),r._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},e.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)},e.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)},e.prototype.start=e.prototype.try,e.prototype.errors=function(){return this._errors},e.prototype.attempts=function(){return this._attempts},e.prototype.mainError=function(){if(0===this._errors.length)return null;for(var t={},e=null,r=0,n=0;n<this._errors.length;n++){var s=this._errors[n],i=s.message,o=(t[i]||0)+1;t[i]=o,o>=r&&(e=s,r=o)}return e}}},e={};function r(n){var s=e[n];if(void 0!==s)return s.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t={};r.r(t),r.d(t,{arToWinston:()=>j,b64UrlDecode:()=>L,b64UrlEncode:()=>U,b64UrlToBuffer:()=>N,b64UrlToString:()=>_,bufferToString:()=>k,bufferTob64:()=>P,bufferTob64Url:()=>B,concatBuffers:()=>T,stringToB64Url:()=>C,stringToBuffer:()=>x,winstonToAr:()=>D});class e extends Error{type;response;constructor(t,e={}){e.message?super(e.message):super(),this.type=t,this.response=e.response}getType(){return this.type}}function n(t){let e=t.data;if("string"==typeof t.data)try{e=JSON.parse(t.data)}catch(t){}if(t.data instanceof ArrayBuffer||t.data instanceof Uint8Array)try{e=JSON.parse(e.toString())}catch(t){}return e?e.error||e:t.statusText||"unknown"}class s{api;network;constructor(t,e){this.api=t,this.network=e}async getByHash(t){const r=await this.api.get(`block/hash/${t}`);if(200===r.status)return r.data;throw 404===r.status?new e("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${r}`)}async getByHeight(t){const r=await this.api.get(`block/height/${t}`);if(200===r.status)return r.data;throw 404===r.status?new e("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${r}`)}async getCurrent(){const{current:t}=await this.network.getInfo();return await this.getByHash(t)}}var i=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,o=Math.ceil,a=Math.floor,c="[BigNumber Error] ",u=c+"Number primitive has more than 15 significant digits: ",h=1e14,l=14,f=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],p=1e7,g=1e9;function m(t){var e=0|t;return t>0||t===e?e:e-1}function w(t){for(var e,r,n=1,s=t.length,i=t[0]+"";n<s;){for(e=t[n++]+"",r=l-e.length;r--;e="0"+e);i+=e}for(s=i.length;48===i.charCodeAt(--s););return i.slice(0,s+1||1)}function y(t,e){var r,n,s=t.c,i=e.c,o=t.s,a=e.s,c=t.e,u=e.e;if(!o||!a)return null;if(r=s&&!s[0],n=i&&!i[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=c==u,!s||!i)return n?0:!s^r?1:-1;if(!n)return c>u^r?1:-1;for(a=(c=s.length)<(u=i.length)?c:u,o=0;o<a;o++)if(s[o]!=i[o])return s[o]>i[o]^r?1:-1;return c==u?0:c>u^r?1:-1}function b(t,e,r,n){if(t<e||t>r||t!==a(t))throw Error(c+(n||"Argument")+("number"==typeof t?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function E(t){var e=t.c.length-1;return m(t.e/l)==e&&t.c[e]%2!=0}function v(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function A(t,e,r){var n,s;if(e<0){for(s=r+".";++e;s+=r);t=s+t}else if(++e>(n=t.length)){for(s=r,e-=n;--e;s+=r);t+=s}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}var S=function t(e){var r,n,s,S,R,O,T,_,k,x,C=z.prototype={constructor:z,toString:null,valueOf:null},N=new z(1),P=20,B=4,U=-7,L=21,D=-1e7,j=1e7,I=!1,H=1,F=0,q={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},M="0123456789abcdefghijklmnopqrstuvwxyz",$=!0;function z(t,e){var r,o,c,h,d,p,g,m,w=this;if(!(w instanceof z))return new z(t,e);if(null==e){if(t&&!0===t._isBigNumber)return w.s=t.s,void(!t.c||t.e>j?w.c=w.e=null:t.e<D?w.c=[w.e=0]:(w.e=t.e,w.c=t.c.slice()));if((p="number"==typeof t)&&0*t==0){if(w.s=1/t<0?(t=-t,-1):1,t===~~t){for(h=0,d=t;d>=10;d/=10,h++);return void(h>j?w.c=w.e=null:(w.e=h,w.c=[t]))}m=String(t)}else{if(!i.test(m=String(t)))return s(w,m,p);w.s=45==m.charCodeAt(0)?(m=m.slice(1),-1):1}(h=m.indexOf("."))>-1&&(m=m.replace(".","")),(d=m.search(/e/i))>0?(h<0&&(h=d),h+=+m.slice(d+1),m=m.substring(0,d)):h<0&&(h=m.length)}else{if(b(e,2,M.length,"Base"),10==e&&$)return W(w=new z(t),P+w.e+1,B);if(m=String(t),p="number"==typeof t){if(0*t!=0)return s(w,m,p,e);if(w.s=1/t<0?(m=m.slice(1),-1):1,z.DEBUG&&m.replace(/^0\.0*|\./,"").length>15)throw Error(u+t)}else w.s=45===m.charCodeAt(0)?(m=m.slice(1),-1):1;for(r=M.slice(0,e),h=d=0,g=m.length;d<g;d++)if(r.indexOf(o=m.charAt(d))<0){if("."==o){if(d>h){h=g;continue}}else if(!c&&(m==m.toUpperCase()&&(m=m.toLowerCase())||m==m.toLowerCase()&&(m=m.toUpperCase()))){c=!0,d=-1,h=0;continue}return s(w,String(t),p,e)}p=!1,(h=(m=n(m,e,10,w.s)).indexOf("."))>-1?m=m.replace(".",""):h=m.length}for(d=0;48===m.charCodeAt(d);d++);for(g=m.length;48===m.charCodeAt(--g););if(m=m.slice(d,++g)){if(g-=d,p&&z.DEBUG&&g>15&&(t>f||t!==a(t)))throw Error(u+w.s*t);if((h=h-d-1)>j)w.c=w.e=null;else if(h<D)w.c=[w.e=0];else{if(w.e=h,w.c=[],d=(h+1)%l,h<0&&(d+=l),d<g){for(d&&w.c.push(+m.slice(0,d)),g-=l;d<g;)w.c.push(+m.slice(d,d+=l));d=l-(m=m.slice(d)).length}else d-=g;for(;d--;m+="0");w.c.push(+m)}}else w.c=[w.e=0]}function K(t,e,r,n){var s,i,o,a,c;if(null==r?r=B:b(r,0,8),!t.c)return t.toString();if(s=t.c[0],o=t.e,null==e)c=w(t.c),c=1==n||2==n&&(o<=U||o>=L)?v(c,o):A(c,o,"0");else if(i=(t=W(new z(t),e,r)).e,a=(c=w(t.c)).length,1==n||2==n&&(e<=i||i<=U)){for(;a<e;c+="0",a++);c=v(c,i)}else if(e-=o,c=A(c,i,"0"),i+1>a){if(--e>0)for(c+=".";e--;c+="0");}else if((e+=i-a)>0)for(i+1==a&&(c+=".");e--;c+="0");return t.s<0&&s?"-"+c:c}function J(t,e){for(var r,n=1,s=new z(t[0]);n<t.length;n++){if(!(r=new z(t[n])).s){s=r;break}e.call(s,r)&&(s=r)}return s}function G(t,e,r){for(var n=1,s=e.length;!e[--s];e.pop());for(s=e[0];s>=10;s/=10,n++);return(r=n+r*l-1)>j?t.c=t.e=null:r<D?t.c=[t.e=0]:(t.e=r,t.c=e),t}function W(t,e,r,n){var s,i,c,u,f,p,g,m=t.c,w=d;if(m){t:{for(s=1,u=m[0];u>=10;u/=10,s++);if((i=e-s)<0)i+=l,c=e,g=(f=m[p=0])/w[s-c-1]%10|0;else if((p=o((i+1)/l))>=m.length){if(!n)break t;for(;m.length<=p;m.push(0));f=g=0,s=1,c=(i%=l)-l+1}else{for(f=u=m[p],s=1;u>=10;u/=10,s++);g=(c=(i%=l)-l+s)<0?0:f/w[s-c-1]%10|0}if(n=n||e<0||null!=m[p+1]||(c<0?f:f%w[s-c-1]),n=r<4?(g||n)&&(0==r||r==(t.s<0?3:2)):g>5||5==g&&(4==r||n||6==r&&(i>0?c>0?f/w[s-c]:0:m[p-1])%10&1||r==(t.s<0?8:7)),e<1||!m[0])return m.length=0,n?(e-=t.e+1,m[0]=w[(l-e%l)%l],t.e=-e||0):m[0]=t.e=0,t;if(0==i?(m.length=p,u=1,p--):(m.length=p+1,u=w[l-i],m[p]=c>0?a(f/w[s-c]%w[c])*u:0),n)for(;;){if(0==p){for(i=1,c=m[0];c>=10;c/=10,i++);for(c=m[0]+=u,u=1;c>=10;c/=10,u++);i!=u&&(t.e++,m[0]==h&&(m[0]=1));break}if(m[p]+=u,m[p]!=h)break;m[p--]=0,u=1}for(i=m.length;0===m[--i];m.pop());}t.e>j?t.c=t.e=null:t.e<D&&(t.c=[t.e=0])}return t}function V(t){var e,r=t.e;return null===r?t.toString():(e=w(t.c),e=r<=U||r>=L?v(e,r):A(e,r,"0"),t.s<0?"-"+e:e)}return z.clone=t,z.ROUND_UP=0,z.ROUND_DOWN=1,z.ROUND_CEIL=2,z.ROUND_FLOOR=3,z.ROUND_HALF_UP=4,z.ROUND_HALF_DOWN=5,z.ROUND_HALF_EVEN=6,z.ROUND_HALF_CEIL=7,z.ROUND_HALF_FLOOR=8,z.EUCLID=9,z.config=z.set=function(t){var e,r;if(null!=t){if("object"!=typeof t)throw Error(c+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(b(r=t[e],0,g,e),P=r),t.hasOwnProperty(e="ROUNDING_MODE")&&(b(r=t[e],0,8,e),B=r),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((r=t[e])&&r.pop?(b(r[0],-g,0,e),b(r[1],0,g,e),U=r[0],L=r[1]):(b(r,-g,g,e),U=-(L=r<0?-r:r))),t.hasOwnProperty(e="RANGE"))if((r=t[e])&&r.pop)b(r[0],-g,-1,e),b(r[1],1,g,e),D=r[0],j=r[1];else{if(b(r,-g,g,e),!r)throw Error(c+e+" cannot be zero: "+r);D=-(j=r<0?-r:r)}if(t.hasOwnProperty(e="CRYPTO")){if((r=t[e])!==!!r)throw Error(c+e+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw I=!r,Error(c+"crypto unavailable");I=r}else I=r}if(t.hasOwnProperty(e="MODULO_MODE")&&(b(r=t[e],0,9,e),H=r),t.hasOwnProperty(e="POW_PRECISION")&&(b(r=t[e],0,g,e),F=r),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(r=t[e]))throw Error(c+e+" not an object: "+r);q=r}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(r=t[e])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(c+e+" invalid: "+r);$="0123456789"==r.slice(0,10),M=r}}return{DECIMAL_PLACES:P,ROUNDING_MODE:B,EXPONENTIAL_AT:[U,L],RANGE:[D,j],CRYPTO:I,MODULO_MODE:H,POW_PRECISION:F,FORMAT:q,ALPHABET:M}},z.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!z.DEBUG)return!0;var e,r,n=t.c,s=t.e,i=t.s;t:if("[object Array]"=={}.toString.call(n)){if((1===i||-1===i)&&s>=-g&&s<=g&&s===a(s)){if(0===n[0]){if(0===s&&1===n.length)return!0;break t}if((e=(s+1)%l)<1&&(e+=l),String(n[0]).length==e){for(e=0;e<n.length;e++)if((r=n[e])<0||r>=h||r!==a(r))break t;if(0!==r)return!0}}}else if(null===n&&null===s&&(null===i||1===i||-1===i))return!0;throw Error(c+"Invalid BigNumber: "+t)},z.maximum=z.max=function(){return J(arguments,C.lt)},z.minimum=z.min=function(){return J(arguments,C.gt)},z.random=(S=9007199254740992,R=Math.random()*S&2097151?function(){return a(Math.random()*S)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,r,n,s,i,u=0,h=[],f=new z(N);if(null==t?t=P:b(t,0,g),s=o(t/l),I)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(s*=2));u<s;)(i=131072*e[u]+(e[u+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),e[u]=r[0],e[u+1]=r[1]):(h.push(i%1e14),u+=2);u=s/2}else{if(!crypto.randomBytes)throw I=!1,Error(c+"crypto unavailable");for(e=crypto.randomBytes(s*=7);u<s;)(i=281474976710656*(31&e[u])+1099511627776*e[u+1]+4294967296*e[u+2]+16777216*e[u+3]+(e[u+4]<<16)+(e[u+5]<<8)+e[u+6])>=9e15?crypto.randomBytes(7).copy(e,u):(h.push(i%1e14),u+=7);u=s/7}if(!I)for(;u<s;)(i=R())<9e15&&(h[u++]=i%1e14);for(s=h[--u],t%=l,s&&t&&(i=d[l-t],h[u]=a(s/i)*i);0===h[u];h.pop(),u--);if(u<0)h=[n=0];else{for(n=-1;0===h[0];h.splice(0,1),n-=l);for(u=1,i=h[0];i>=10;i/=10,u++);u<l&&(n-=l-u)}return f.e=n,f.c=h,f}),z.sum=function(){for(var t=1,e=arguments,r=new z(e[0]);t<e.length;)r=r.plus(e[t++]);return r},n=function(){var t="0123456789";function e(t,e,r,n){for(var s,i,o=[0],a=0,c=t.length;a<c;){for(i=o.length;i--;o[i]*=e);for(o[0]+=n.indexOf(t.charAt(a++)),s=0;s<o.length;s++)o[s]>r-1&&(null==o[s+1]&&(o[s+1]=0),o[s+1]+=o[s]/r|0,o[s]%=r)}return o.reverse()}return function(n,s,i,o,a){var c,u,h,l,f,d,p,g,m=n.indexOf("."),y=P,b=B;for(m>=0&&(l=F,F=0,n=n.replace(".",""),d=(g=new z(s)).pow(n.length-m),F=l,g.c=e(A(w(d.c),d.e,"0"),10,i,t),g.e=g.c.length),h=l=(p=e(n,s,i,a?(c=M,t):(c=t,M))).length;0==p[--l];p.pop());if(!p[0])return c.charAt(0);if(m<0?--h:(d.c=p,d.e=h,d.s=o,p=(d=r(d,g,y,b,i)).c,f=d.r,h=d.e),m=p[u=h+y+1],l=i/2,f=f||u<0||null!=p[u+1],f=b<4?(null!=m||f)&&(0==b||b==(d.s<0?3:2)):m>l||m==l&&(4==b||f||6==b&&1&p[u-1]||b==(d.s<0?8:7)),u<1||!p[0])n=f?A(c.charAt(1),-y,c.charAt(0)):c.charAt(0);else{if(p.length=u,f)for(--i;++p[--u]>i;)p[u]=0,u||(++h,p=[1].concat(p));for(l=p.length;!p[--l];);for(m=0,n="";m<=l;n+=c.charAt(p[m++]));n=A(n,h,c.charAt(0))}return n}}(),r=function(){function t(t,e,r){var n,s,i,o,a=0,c=t.length,u=e%p,h=e/p|0;for(t=t.slice();c--;)a=((s=u*(i=t[c]%p)+(n=h*i+(o=t[c]/p|0)*u)%p*p+a)/r|0)+(n/p|0)+h*o,t[c]=s%r;return a&&(t=[a].concat(t)),t}function e(t,e,r,n){var s,i;if(r!=n)i=r>n?1:-1;else for(s=i=0;s<r;s++)if(t[s]!=e[s]){i=t[s]>e[s]?1:-1;break}return i}function r(t,e,r,n){for(var s=0;r--;)t[r]-=s,s=t[r]<e[r]?1:0,t[r]=s*n+t[r]-e[r];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(n,s,i,o,c){var u,f,d,p,g,w,y,b,E,v,A,S,R,O,T,_,k,x=n.s==s.s?1:-1,C=n.c,N=s.c;if(!(C&&C[0]&&N&&N[0]))return new z(n.s&&s.s&&(C?!N||C[0]!=N[0]:N)?C&&0==C[0]||!N?0*x:x/0:NaN);for(E=(b=new z(x)).c=[],x=i+(f=n.e-s.e)+1,c||(c=h,f=m(n.e/l)-m(s.e/l),x=x/l|0),d=0;N[d]==(C[d]||0);d++);if(N[d]>(C[d]||0)&&f--,x<0)E.push(1),p=!0;else{for(O=C.length,_=N.length,d=0,x+=2,(g=a(c/(N[0]+1)))>1&&(N=t(N,g,c),C=t(C,g,c),_=N.length,O=C.length),R=_,A=(v=C.slice(0,_)).length;A<_;v[A++]=0);k=N.slice(),k=[0].concat(k),T=N[0],N[1]>=c/2&&T++;do{if(g=0,(u=e(N,v,_,A))<0){if(S=v[0],_!=A&&(S=S*c+(v[1]||0)),(g=a(S/T))>1)for(g>=c&&(g=c-1),y=(w=t(N,g,c)).length,A=v.length;1==e(w,v,y,A);)g--,r(w,_<y?k:N,y,c),y=w.length,u=1;else 0==g&&(u=g=1),y=(w=N.slice()).length;if(y<A&&(w=[0].concat(w)),r(v,w,A,c),A=v.length,-1==u)for(;e(N,v,_,A)<1;)g++,r(v,_<A?k:N,A,c),A=v.length}else 0===u&&(g++,v=[0]);E[d++]=g,v[0]?v[A++]=C[R]||0:(v=[C[R]],A=1)}while((R++<O||null!=v[0])&&x--);p=null!=v[0],E[0]||E.splice(0,1)}if(c==h){for(d=1,x=E[0];x>=10;x/=10,d++);W(b,i+(b.e=d+f*l-1)+1,o,p)}else b.e=f,b.r=+p;return b}}(),O=/^(-?)0([xbo])(?=\w[\w.]*$)/i,T=/^([^.]+)\.$/,_=/^\.([^.]+)$/,k=/^-?(Infinity|NaN)$/,x=/^\s*\+(?=[\w.])|^\s+|\s+$/g,s=function(t,e,r,n){var s,i=r?e:e.replace(x,"");if(k.test(i))t.s=isNaN(i)?null:i<0?-1:1;else{if(!r&&(i=i.replace(O,(function(t,e,r){return s="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=s?t:e})),n&&(s=n,i=i.replace(T,"$1").replace(_,"0.$1")),e!=i))return new z(i,s);if(z.DEBUG)throw Error(c+"Not a"+(n?" base "+n:"")+" number: "+e);t.s=null}t.c=t.e=null},C.absoluteValue=C.abs=function(){var t=new z(this);return t.s<0&&(t.s=1),t},C.comparedTo=function(t,e){return y(this,new z(t,e))},C.decimalPlaces=C.dp=function(t,e){var r,n,s,i=this;if(null!=t)return b(t,0,g),null==e?e=B:b(e,0,8),W(new z(i),t+i.e+1,e);if(!(r=i.c))return null;if(n=((s=r.length-1)-m(this.e/l))*l,s=r[s])for(;s%10==0;s/=10,n--);return n<0&&(n=0),n},C.dividedBy=C.div=function(t,e){return r(this,new z(t,e),P,B)},C.dividedToIntegerBy=C.idiv=function(t,e){return r(this,new z(t,e),0,1)},C.exponentiatedBy=C.pow=function(t,e){var r,n,s,i,u,h,f,d,p=this;if((t=new z(t)).c&&!t.isInteger())throw Error(c+"Exponent not an integer: "+V(t));if(null!=e&&(e=new z(e)),u=t.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!t.c||!t.c[0])return d=new z(Math.pow(+V(p),u?t.s*(2-E(t)):+V(t))),e?d.mod(e):d;if(h=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new z(NaN);(n=!h&&p.isInteger()&&e.isInteger())&&(p=p.mod(e))}else{if(t.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||u&&p.c[1]>=24e7:p.c[0]<8e13||u&&p.c[0]<=9999975e7)))return i=p.s<0&&E(t)?-0:0,p.e>-1&&(i=1/i),new z(h?1/i:i);F&&(i=o(F/l+2))}for(u?(r=new z(.5),h&&(t.s=1),f=E(t)):f=(s=Math.abs(+V(t)))%2,d=new z(N);;){if(f){if(!(d=d.times(p)).c)break;i?d.c.length>i&&(d.c.length=i):n&&(d=d.mod(e))}if(s){if(0===(s=a(s/2)))break;f=s%2}else if(W(t=t.times(r),t.e+1,1),t.e>14)f=E(t);else{if(0===(s=+V(t)))break;f=s%2}p=p.times(p),i?p.c&&p.c.length>i&&(p.c.length=i):n&&(p=p.mod(e))}return n?d:(h&&(d=N.div(d)),e?d.mod(e):i?W(d,F,B,undefined):d)},C.integerValue=function(t){var e=new z(this);return null==t?t=B:b(t,0,8),W(e,e.e+1,t)},C.isEqualTo=C.eq=function(t,e){return 0===y(this,new z(t,e))},C.isFinite=function(){return!!this.c},C.isGreaterThan=C.gt=function(t,e){return y(this,new z(t,e))>0},C.isGreaterThanOrEqualTo=C.gte=function(t,e){return 1===(e=y(this,new z(t,e)))||0===e},C.isInteger=function(){return!!this.c&&m(this.e/l)>this.c.length-2},C.isLessThan=C.lt=function(t,e){return y(this,new z(t,e))<0},C.isLessThanOrEqualTo=C.lte=function(t,e){return-1===(e=y(this,new z(t,e)))||0===e},C.isNaN=function(){return!this.s},C.isNegative=function(){return this.s<0},C.isPositive=function(){return this.s>0},C.isZero=function(){return!!this.c&&0==this.c[0]},C.minus=function(t,e){var r,n,s,i,o=this,a=o.s;if(e=(t=new z(t,e)).s,!a||!e)return new z(NaN);if(a!=e)return t.s=-e,o.plus(t);var c=o.e/l,u=t.e/l,f=o.c,d=t.c;if(!c||!u){if(!f||!d)return f?(t.s=-e,t):new z(d?o:NaN);if(!f[0]||!d[0])return d[0]?(t.s=-e,t):new z(f[0]?o:3==B?-0:0)}if(c=m(c),u=m(u),f=f.slice(),a=c-u){for((i=a<0)?(a=-a,s=f):(u=c,s=d),s.reverse(),e=a;e--;s.push(0));s.reverse()}else for(n=(i=(a=f.length)<(e=d.length))?a:e,a=e=0;e<n;e++)if(f[e]!=d[e]){i=f[e]<d[e];break}if(i&&(s=f,f=d,d=s,t.s=-t.s),(e=(n=d.length)-(r=f.length))>0)for(;e--;f[r++]=0);for(e=h-1;n>a;){if(f[--n]<d[n]){for(r=n;r&&!f[--r];f[r]=e);--f[r],f[n]+=h}f[n]-=d[n]}for(;0==f[0];f.splice(0,1),--u);return f[0]?G(t,f,u):(t.s=3==B?-1:1,t.c=[t.e=0],t)},C.modulo=C.mod=function(t,e){var n,s,i=this;return t=new z(t,e),!i.c||!t.s||t.c&&!t.c[0]?new z(NaN):!t.c||i.c&&!i.c[0]?new z(i):(9==H?(s=t.s,t.s=1,n=r(i,t,0,3),t.s=s,n.s*=s):n=r(i,t,0,H),(t=i.minus(n.times(t))).c[0]||1!=H||(t.s=i.s),t)},C.multipliedBy=C.times=function(t,e){var r,n,s,i,o,a,c,u,f,d,g,w,y,b,E,v=this,A=v.c,S=(t=new z(t,e)).c;if(!(A&&S&&A[0]&&S[0]))return!v.s||!t.s||A&&!A[0]&&!S||S&&!S[0]&&!A?t.c=t.e=t.s=null:(t.s*=v.s,A&&S?(t.c=[0],t.e=0):t.c=t.e=null),t;for(n=m(v.e/l)+m(t.e/l),t.s*=v.s,(c=A.length)<(d=S.length)&&(y=A,A=S,S=y,s=c,c=d,d=s),s=c+d,y=[];s--;y.push(0));for(b=h,E=p,s=d;--s>=0;){for(r=0,g=S[s]%E,w=S[s]/E|0,i=s+(o=c);i>s;)r=((u=g*(u=A[--o]%E)+(a=w*u+(f=A[o]/E|0)*g)%E*E+y[i]+r)/b|0)+(a/E|0)+w*f,y[i--]=u%b;y[i]=r}return r?++n:y.splice(0,1),G(t,y,n)},C.negated=function(){var t=new z(this);return t.s=-t.s||null,t},C.plus=function(t,e){var r,n=this,s=n.s;if(e=(t=new z(t,e)).s,!s||!e)return new z(NaN);if(s!=e)return t.s=-e,n.minus(t);var i=n.e/l,o=t.e/l,a=n.c,c=t.c;if(!i||!o){if(!a||!c)return new z(s/0);if(!a[0]||!c[0])return c[0]?t:new z(a[0]?n:0*s)}if(i=m(i),o=m(o),a=a.slice(),s=i-o){for(s>0?(o=i,r=c):(s=-s,r=a),r.reverse();s--;r.push(0));r.reverse()}for((s=a.length)-(e=c.length)<0&&(r=c,c=a,a=r,e=s),s=0;e;)s=(a[--e]=a[e]+c[e]+s)/h|0,a[e]=h===a[e]?0:a[e]%h;return s&&(a=[s].concat(a),++o),G(t,a,o)},C.precision=C.sd=function(t,e){var r,n,s,i=this;if(null!=t&&t!==!!t)return b(t,1,g),null==e?e=B:b(e,0,8),W(new z(i),t,e);if(!(r=i.c))return null;if(n=(s=r.length-1)*l+1,s=r[s]){for(;s%10==0;s/=10,n--);for(s=r[0];s>=10;s/=10,n++);}return t&&i.e+1>n&&(n=i.e+1),n},C.shiftedBy=function(t){return b(t,-9007199254740991,f),this.times("1e"+t)},C.squareRoot=C.sqrt=function(){var t,e,n,s,i,o=this,a=o.c,c=o.s,u=o.e,h=P+4,l=new z("0.5");if(1!==c||!a||!a[0])return new z(!c||c<0&&(!a||a[0])?NaN:a?o:1/0);if(0==(c=Math.sqrt(+V(o)))||c==1/0?(((e=w(a)).length+u)%2==0&&(e+="0"),c=Math.sqrt(+e),u=m((u+1)/2)-(u<0||u%2),n=new z(e=c==1/0?"5e"+u:(e=c.toExponential()).slice(0,e.indexOf("e")+1)+u)):n=new z(c+""),n.c[0])for((c=(u=n.e)+h)<3&&(c=0);;)if(i=n,n=l.times(i.plus(r(o,i,h,1))),w(i.c).slice(0,c)===(e=w(n.c)).slice(0,c)){if(n.e<u&&--c,"9999"!=(e=e.slice(c-3,c+1))&&(s||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(W(n,n.e+P+2,1),t=!n.times(n).eq(o));break}if(!s&&(W(i,i.e+P+2,0),i.times(i).eq(o))){n=i;break}h+=4,c+=4,s=1}return W(n,n.e+P+1,B,t)},C.toExponential=function(t,e){return null!=t&&(b(t,0,g),t++),K(this,t,e,1)},C.toFixed=function(t,e){return null!=t&&(b(t,0,g),t=t+this.e+1),K(this,t,e)},C.toFormat=function(t,e,r){var n,s=this;if(null==r)null!=t&&e&&"object"==typeof e?(r=e,e=null):t&&"object"==typeof t?(r=t,t=e=null):r=q;else if("object"!=typeof r)throw Error(c+"Argument not an object: "+r);if(n=s.toFixed(t,e),s.c){var i,o=n.split("."),a=+r.groupSize,u=+r.secondaryGroupSize,h=r.groupSeparator||"",l=o[0],f=o[1],d=s.s<0,p=d?l.slice(1):l,g=p.length;if(u&&(i=a,a=u,u=i,g-=i),a>0&&g>0){for(i=g%a||a,l=p.substr(0,i);i<g;i+=a)l+=h+p.substr(i,a);u>0&&(l+=h+p.slice(i)),d&&(l="-"+l)}n=f?l+(r.decimalSeparator||"")+((u=+r.fractionGroupSize)?f.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):f):l}return(r.prefix||"")+n+(r.suffix||"")},C.toFraction=function(t){var e,n,s,i,o,a,u,h,f,p,g,m,y=this,b=y.c;if(null!=t&&(!(u=new z(t)).isInteger()&&(u.c||1!==u.s)||u.lt(N)))throw Error(c+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+V(u));if(!b)return new z(y);for(e=new z(N),f=n=new z(N),s=h=new z(N),m=w(b),o=e.e=m.length-y.e-1,e.c[0]=d[(a=o%l)<0?l+a:a],t=!t||u.comparedTo(e)>0?o>0?e:f:u,a=j,j=1/0,u=new z(m),h.c[0]=0;p=r(u,e,0,1),1!=(i=n.plus(p.times(s))).comparedTo(t);)n=s,s=i,f=h.plus(p.times(i=f)),h=i,e=u.minus(p.times(i=e)),u=i;return i=r(t.minus(n),s,0,1),h=h.plus(i.times(f)),n=n.plus(i.times(s)),h.s=f.s=y.s,g=r(f,s,o*=2,B).minus(y).abs().comparedTo(r(h,n,o,B).minus(y).abs())<1?[f,s]:[h,n],j=a,g},C.toNumber=function(){return+V(this)},C.toPrecision=function(t,e){return null!=t&&b(t,1,g),K(this,t,e,2)},C.toString=function(t){var e,r=this,s=r.s,i=r.e;return null===i?s?(e="Infinity",s<0&&(e="-"+e)):e="NaN":(null==t?e=i<=U||i>=L?v(w(r.c),i):A(w(r.c),i,"0"):10===t&&$?e=A(w((r=W(new z(r),P+i+1,B)).c),r.e,"0"):(b(t,2,M.length,"Base"),e=n(A(w(r.c),i,"0"),10,t,s,!0)),s<0&&r.c[0]&&(e="-"+e)),e},C.valueOf=C.toJSON=function(){return V(this)},C._isBigNumber=!0,C[Symbol.toStringTag]="BigNumber",C[Symbol.for("nodejs.util.inspect.custom")]=C.valueOf,null!=e&&z.set(e),z}();const R=S;var O=r(742);function T(t){let e=0;for(const r of t)e+=r.byteLength;const r=new Uint8Array(e);let n=0;r.set(new Uint8Array(t[0]),n),n+=t[0].byteLength;for(let e=1;e<t.length;e++)r.set(new Uint8Array(t[e]),n),n+=t[e].byteLength;return r}function _(t){return k(N(t))}function k(t){return new TextDecoder("utf-8",{fatal:!0}).decode(t)}function x(t){return(new TextEncoder).encode(t)}function C(t){return B(x(t))}function N(t){return new Uint8Array((0,O.b$)(L(t)))}function P(t){return(0,O.JQ)(new Uint8Array(t))}function B(t){return U(P(t))}function U(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}function L(t){let e;return e=(t=t.replace(/\-/g,"+").replace(/\_/g,"/")).length%4==0?0:4-t.length%4,t.concat("=".repeat(e))}function D(t){return new R(t).shiftedBy(-12)}function j(t){return new R(t).shiftedBy(12)}const I=262144,H=32;function F(t){const e=[];return t.forEach((t=>{Array.isArray(t)?e.push(...F(t)):e.push(t)})),e}function q(t){const e=new Uint8Array(32);for(let r=e.length-1;r>=0;r--){const n=t%256;e[r]=n,t=(t-n)/256}return e}function M(t){let e=0;for(let r=0;r<t.length;r++)e*=256,e+=t[r];return e}const $=(t,e)=>t.every(((t,r)=>e[r]===t)),z=class{crypto;constructor(t){this.crypto=t.deps.crypto}async chunkData(t){const e=[];let r=t,n=0;for(;r.byteLength>=I;){let t=I;const s=r.byteLength-I;s>0&&s<32768&&(t=Math.ceil(r.byteLength/2));const i=r.slice(0,t),o=await this.crypto.hash(i);n+=i.byteLength,e.push({dataHash:o,minByteRange:n-i.byteLength,maxByteRange:n}),r=r.slice(t)}return e.push({dataHash:await this.crypto.hash(r),minByteRange:n,maxByteRange:n+r.byteLength}),e}async generateLeaves(t){return Promise.all(t.map((async({dataHash:t,minByteRange:e,maxByteRange:r})=>({type:"leaf",id:await this.hash(await Promise.all([this.hash(t),this.hash(q(r))])),dataHash:t,minByteRange:e,maxByteRange:r}))))}async computeRootHash(t){return(await this.generateTree(t)).id}async generateTree(t){return await this.buildLayers(await this.generateLeaves(await this.chunkData(t)))}async generateTransactionChunks(t){const e=await this.chunkData(t),r=await this.generateLeaves(e),n=await this.buildLayers(r),s=await this.generateProofs(n),i=e.slice(-1)[0];return i.maxByteRange-i.minByteRange==0&&(e.splice(e.length-1,1),s.splice(s.length-1,1)),{data_root:n.id,chunks:e,proofs:s}}async buildLayers(t,e=0){if(t.length<2){return t[0]}const r=[];for(let e=0;e<t.length;e+=2)r.push(await this.hashBranch(t[e],t[e+1]));return this.buildLayers(r,e+1)}generateProofs(t){const e=this.resolveBranchProofs(t);return Array.isArray(e)?F(e):[e]}resolveBranchProofs(t,e=new Uint8Array,r=0){if("leaf"==t.type)return{offset:t.maxByteRange-1,proof:T([e,t.dataHash,q(t.maxByteRange)])};if("branch"==t.type){const n=T([e,t.leftChild.id,t.rightChild.id,q(t.byteRange)]);return[this.resolveBranchProofs(t.leftChild,n,r+1),this.resolveBranchProofs(t.rightChild,n,r+1)]}throw new Error("Unexpected node type")}async validatePath(t,e,r,n,s){if(n<=0)return!1;if(e>=n)return this.validatePath(t,0,n-1,n,s);if(e<0)return this.validatePath(t,0,0,n,s);if(64==s.length){const e=s.slice(0,H),i=s.slice(e.length,e.length+32),o=await this.hash([await this.hash(e),await this.hash(i)]);return!!$(t,o)&&{offset:n-1,leftBound:r,rightBound:n,chunkSize:n-r}}const i=s.slice(0,H),o=s.slice(i.length,i.length+H),a=s.slice(i.length+o.length,i.length+o.length+32),c=M(a),u=s.slice(i.length+o.length+a.length),h=await this.hash([await this.hash(i),await this.hash(o),await this.hash(a)]);return!!$(t,h)&&(e<c?await this.validatePath(i,e,r,Math.min(n,c),u):await this.validatePath(o,e,Math.max(r,c),n,u))}async hashBranch(t,e){if(!e)return t;return{type:"branch",id:await this.hash([await this.hash(t.id),await this.hash(e.id),await this.hash(q(t.maxByteRange))]),byteRange:t.maxByteRange,maxByteRange:e.maxByteRange,leftChild:t,rightChild:e}}async hash(t){return Array.isArray(t)&&(t=Ke.utils.concatBuffers(t)),new Uint8Array(await this.crypto.hash(t))}async debug(t,e=""){if(t.byteLength<1)return e;const r=t.slice(0,H),n=t.slice(r.length,r.length+H),s=t.slice(r.length+n.length,r.length+n.length+32),i=M(s),o=t.slice(r.length+n.length+s.length),a=await this.hash([await this.hash(r),await this.hash(n),await this.hash(s)]),c=`${e}\n${JSON.stringify(Buffer.from(r))},${JSON.stringify(Buffer.from(n))},${i} => ${JSON.stringify(a)}`;return this.debug(o,c)}};class K{api;constructor(t){this.api=t}async getTransactionMetadata(t){const e=await this.api.get(`tx/${t}/offset`);if(200===e.status)return e.data;throw new Error(`Unable to get transaction offset: ${n(e)}`)}async getChunk(t){const e=await this.api.get(`chunk/${t}`);if(200===e.status)return e.data;throw new Error(`Unable to get chunk: ${n(e)}`)}async getChunkData(t){return N((await this.getChunk(t)).chunk)}firstChunkOffset(t){return parseInt(t.offset)-parseInt(t.size)+1}async downloadChunkedData(t,e){const r=await this.getTransactionMetadata(t),n=parseInt(r.size),s=new Uint8Array(n);let i=0;for await(const r of this.concurrentChunkDownloader(t,e))s.set(r,i),i+=r.length;return s}async*concurrentChunkDownloader(t,e){const r={concurrency:10,...e},n=await this.getTransactionMetadata(t),s=new R(n.offset),i=new R(n.size),o=s.minus(i).plus(1);let a=0;const c=t=>this.getChunkData(t.toString()).then((t=>(a+=t.length,t))),u=[],h=Math.ceil(i.dividedBy(I).toNumber())-2,l=Math.min(h,r.concurrency);let f=0;for(let t=0;t<l;t++)u.push(c(o.plus(I*f++)));for(;f<h;)u.push(c(o.plus(I*f++))),yield u.shift();for(;u.length>0;)yield u.shift();if(yield c(o.plus(I*f++)),i.isGreaterThan(a)&&(yield c(o.plus(I*f++))),!i.isEqualTo(a))throw new Error(`got ${a}B, expected ${i.toString()}B`)}}class J{crypto;utils;constructor({deps:t}){this.crypto=t.crypto,this.utils=t.utils}async deepHash(t){if(Array.isArray(t)){const e=this.utils.concatBuffers([this.utils.stringToBuffer("list"),this.utils.stringToBuffer(t.length.toString())]);return await this.deepHashChunks(t,await this.crypto.hash(e,"SHA-384"))}const e=this.utils.concatBuffers([this.utils.stringToBuffer("blob"),this.utils.stringToBuffer(t.byteLength.toString())]),r=this.utils.concatBuffers([await this.crypto.hash(e,"SHA-384"),await this.crypto.hash(t,"SHA-384")]);return await this.crypto.hash(r,"SHA-384")}async deepHashChunks(t,e){if(t.length<1)return e;const r=this.utils.concatBuffers([e,await this.deepHash(t[0])]),n=await this.crypto.hash(r,"SHA-384");return await this.deepHashChunks(t.slice(1),n)}}function G(t,e){return function(){return t.apply(e,arguments)}}const{toString:W}=Object.prototype,{getPrototypeOf:V}=Object,X=(Q=Object.create(null),t=>{const e=W.call(t);return Q[e]||(Q[e]=e.slice(8,-1).toLowerCase())});var Q;const Y=t=>(t=t.toLowerCase(),e=>X(e)===t),Z=t=>e=>typeof e===t,{isArray:tt}=Array,et=Z("undefined");const rt=Y("ArrayBuffer");const nt=Z("string"),st=Z("function"),it=Z("number"),ot=t=>null!==t&&"object"==typeof t,at=t=>{if("object"!==X(t))return!1;const e=V(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)},ct=Y("Date"),ut=Y("File"),ht=Y("Blob"),lt=Y("FileList"),ft=Y("URLSearchParams");function dt(t,e,{allOwnKeys:r=!1}={}){if(null==t)return;let n,s;if("object"!=typeof t&&(t=[t]),tt(t))for(n=0,s=t.length;n<s;n++)e.call(null,t[n],n,t);else{const s=r?Object.getOwnPropertyNames(t):Object.keys(t),i=s.length;let o;for(n=0;n<i;n++)o=s[n],e.call(null,t[o],o,t)}}function pt(t,e){e=e.toLowerCase();const r=Object.keys(t);let n,s=r.length;for(;s-- >0;)if(n=r[s],e===n.toLowerCase())return n;return null}const gt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,mt=t=>!et(t)&&t!==gt;const wt=(yt="undefined"!=typeof Uint8Array&&V(Uint8Array),t=>yt&&t instanceof yt);var yt;const bt=Y("HTMLFormElement"),Et=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),vt=Y("RegExp"),At=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};dt(r,((r,s)=>{!1!==e(r,s,t)&&(n[s]=r)})),Object.defineProperties(t,n)},St="abcdefghijklmnopqrstuvwxyz",Rt="0123456789",Ot={DIGIT:Rt,ALPHA:St,ALPHA_DIGIT:St+St.toUpperCase()+Rt};const Tt=Y("AsyncFunction"),_t={isArray:tt,isArrayBuffer:rt,isBuffer:function(t){return null!==t&&!et(t)&&null!==t.constructor&&!et(t.constructor)&&st(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:t=>{let e;return t&&("function"==typeof FormData&&t instanceof FormData||st(t.append)&&("formdata"===(e=X(t))||"object"===e&&st(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&rt(t.buffer),e},isString:nt,isNumber:it,isBoolean:t=>!0===t||!1===t,isObject:ot,isPlainObject:at,isUndefined:et,isDate:ct,isFile:ut,isBlob:ht,isRegExp:vt,isFunction:st,isStream:t=>ot(t)&&st(t.pipe),isURLSearchParams:ft,isTypedArray:wt,isFileList:lt,forEach:dt,merge:function t(){const{caseless:e}=mt(this)&&this||{},r={},n=(n,s)=>{const i=e&&pt(r,s)||s;at(r[i])&&at(n)?r[i]=t(r[i],n):at(n)?r[i]=t({},n):tt(n)?r[i]=n.slice():r[i]=n};for(let t=0,e=arguments.length;t<e;t++)arguments[t]&&dt(arguments[t],n);return r},extend:(t,e,r,{allOwnKeys:n}={})=>(dt(e,((e,n)=>{r&&st(e)?t[n]=G(e,r):t[n]=e}),{allOwnKeys:n}),t),trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},toFlatObject:(t,e,r,n)=>{let s,i,o;const a={};if(e=e||{},null==t)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],n&&!n(o,t,e)||a[o]||(e[o]=t[o],a[o]=!0);t=!1!==r&&V(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},kindOf:X,kindOfTest:Y,endsWith:(t,e,r)=>{t=String(t),(void 0===r||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return-1!==n&&n===r},toArray:t=>{if(!t)return null;if(tt(t))return t;let e=t.length;if(!it(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},forEachEntry:(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let n;for(;(n=r.next())&&!n.done;){const r=n.value;e.call(t,r[0],r[1])}},matchAll:(t,e)=>{let r;const n=[];for(;null!==(r=t.exec(e));)n.push(r);return n},isHTMLForm:bt,hasOwnProperty:Et,hasOwnProp:Et,reduceDescriptors:At,freezeMethods:t=>{At(t,((e,r)=>{if(st(t)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=t[r];st(n)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))}))},toObjectSet:(t,e)=>{const r={},n=t=>{t.forEach((t=>{r[t]=!0}))};return tt(t)?n(t):n(String(t).split(e)),r},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,r){return e.toUpperCase()+r})),noop:()=>{},toFiniteNumber:(t,e)=>(t=+t,Number.isFinite(t)?t:e),findKey:pt,global:gt,isContextDefined:mt,ALPHABET:Ot,generateString:(t=16,e=Ot.ALPHA_DIGIT)=>{let r="";const{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r},isSpecCompliantForm:function(t){return!!(t&&st(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])},toJSONObject:t=>{const e=new Array(10),r=(t,n)=>{if(ot(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[n]=t;const s=tt(t)?[]:{};return dt(t,((t,e)=>{const i=r(t,n+1);!et(i)&&(s[e]=i)})),e[n]=void 0,s}}return t};return r(t,0)},isAsyncFn:Tt,isThenable:t=>t&&(ot(t)||st(t))&&st(t.then)&&st(t.catch)};function kt(t,e,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s)}_t.inherits(kt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_t.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const xt=kt.prototype,Ct={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((t=>{Ct[t]={value:t}})),Object.defineProperties(kt,Ct),Object.defineProperty(xt,"isAxiosError",{value:!0}),kt.from=(t,e,r,n,s,i)=>{const o=Object.create(xt);return _t.toFlatObject(t,o,(function(t){return t!==Error.prototype}),(t=>"isAxiosError"!==t)),kt.call(o,t.message,e,r,n,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const Nt=kt;function Pt(t){return _t.isPlainObject(t)||_t.isArray(t)}function Bt(t){return _t.endsWith(t,"[]")?t.slice(0,-2):t}function Ut(t,e,r){return t?t.concat(e).map((function(t,e){return t=Bt(t),!r&&e?"["+t+"]":t})).join(r?".":""):e}const Lt=_t.toFlatObject(_t,{},null,(function(t){return/^is[A-Z]/.test(t)}));const Dt=function(t,e,r){if(!_t.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;const n=(r=_t.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!_t.isUndefined(e[t])}))).metaTokens,s=r.visitor||u,i=r.dots,o=r.indexes,a=(r.Blob||"undefined"!=typeof Blob&&Blob)&&_t.isSpecCompliantForm(e);if(!_t.isFunction(s))throw new TypeError("visitor must be a function");function c(t){if(null===t)return"";if(_t.isDate(t))return t.toISOString();if(!a&&_t.isBlob(t))throw new Nt("Blob is not supported. Use a Buffer instead.");return _t.isArrayBuffer(t)||_t.isTypedArray(t)?a&&"function"==typeof Blob?new Blob([t]):Buffer.from(t):t}function u(t,r,s){let a=t;if(t&&!s&&"object"==typeof t)if(_t.endsWith(r,"{}"))r=n?r:r.slice(0,-2),t=JSON.stringify(t);else if(_t.isArray(t)&&function(t){return _t.isArray(t)&&!t.some(Pt)}(t)||(_t.isFileList(t)||_t.endsWith(r,"[]"))&&(a=_t.toArray(t)))return r=Bt(r),a.forEach((function(t,n){!_t.isUndefined(t)&&null!==t&&e.append(!0===o?Ut([r],n,i):null===o?r:r+"[]",c(t))})),!1;return!!Pt(t)||(e.append(Ut(s,r,i),c(t)),!1)}const h=[],l=Object.assign(Lt,{defaultVisitor:u,convertValue:c,isVisitable:Pt});if(!_t.isObject(t))throw new TypeError("data must be an object");return function t(r,n){if(!_t.isUndefined(r)){if(-1!==h.indexOf(r))throw Error("Circular reference detected in "+n.join("."));h.push(r),_t.forEach(r,(function(r,i){!0===(!(_t.isUndefined(r)||null===r)&&s.call(e,r,_t.isString(i)?i.trim():i,n,l))&&t(r,n?n.concat(i):[i])})),h.pop()}}(t),e};function jt(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function It(t,e){this._pairs=[],t&&Dt(t,this,e)}const Ht=It.prototype;Ht.append=function(t,e){this._pairs.push([t,e])},Ht.toString=function(t){const e=t?function(e){return t.call(this,e,jt)}:jt;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};const Ft=It;function qt(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Mt(t,e,r){if(!e)return t;const n=r&&r.encode||qt,s=r&&r.serialize;let i;if(i=s?s(e,r):_t.isURLSearchParams(e)?e.toString():new Ft(e,r).toString(n),i){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+i}return t}const $t=class{constructor(){this.handlers=[]}use(t,e,r){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){_t.forEach(this.handlers,(function(e){null!==e&&t(e)}))}},zt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Kt={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Ft,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:(()=>{let t;return("undefined"==typeof navigator||"ReactNative"!==(t=navigator.product)&&"NativeScript"!==t&&"NS"!==t)&&("undefined"!=typeof window&&"undefined"!=typeof document)})(),isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};const Jt=function(t){function e(t,r,n,s){let i=t[s++];const o=Number.isFinite(+i),a=s>=t.length;if(i=!i&&_t.isArray(n)?n.length:i,a)return _t.hasOwnProp(n,i)?n[i]=[n[i],r]:n[i]=r,!o;n[i]&&_t.isObject(n[i])||(n[i]=[]);return e(t,r,n[i],s)&&_t.isArray(n[i])&&(n[i]=function(t){const e={},r=Object.keys(t);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],e[i]=t[i];return e}(n[i])),!o}if(_t.isFormData(t)&&_t.isFunction(t.entries)){const r={};return _t.forEachEntry(t,((t,n)=>{e(function(t){return _t.matchAll(/\w+|\[(\w*)]/g,t).map((t=>"[]"===t[0]?"":t[1]||t[0]))}(t),n,r,0)})),r}return null},Gt={"Content-Type":void 0};const Wt={transitional:zt,adapter:["xhr","http"],transformRequest:[function(t,e){const r=e.getContentType()||"",n=r.indexOf("application/json")>-1,s=_t.isObject(t);s&&_t.isHTMLForm(t)&&(t=new FormData(t));if(_t.isFormData(t))return n&&n?JSON.stringify(Jt(t)):t;if(_t.isArrayBuffer(t)||_t.isBuffer(t)||_t.isStream(t)||_t.isFile(t)||_t.isBlob(t))return t;if(_t.isArrayBufferView(t))return t.buffer;if(_t.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return Dt(t,new Kt.classes.URLSearchParams,Object.assign({visitor:function(t,e,r,n){return Kt.isNode&&_t.isBuffer(t)?(this.append(e,t.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((i=_t.isFileList(t))||r.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return Dt(i?{"files[]":t}:t,e&&new e,this.formSerializer)}}return s||n?(e.setContentType("application/json",!1),function(t,e,r){if(_t.isString(t))try{return(e||JSON.parse)(t),_t.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(r||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||Wt.transitional,r=e&&e.forcedJSONParsing,n="json"===this.responseType;if(t&&_t.isString(t)&&(r&&!this.responseType||n)){const r=!(e&&e.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(t){if(r){if("SyntaxError"===t.name)throw Nt.from(t,Nt.ERR_BAD_RESPONSE,this,null,this.response);throw t}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Kt.classes.FormData,Blob:Kt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};_t.forEach(["delete","get","head"],(function(t){Wt.headers[t]={}})),_t.forEach(["post","put","patch"],(function(t){Wt.headers[t]=_t.merge(Gt)}));const Vt=Wt,Xt=_t.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Qt=Symbol("internals");function Yt(t){return t&&String(t).trim().toLowerCase()}function Zt(t){return!1===t||null==t?t:_t.isArray(t)?t.map(Zt):String(t)}function te(t,e,r,n,s){return _t.isFunction(n)?n.call(this,e,r):(s&&(e=r),_t.isString(e)?_t.isString(n)?-1!==e.indexOf(n):_t.isRegExp(n)?n.test(e):void 0:void 0)}class ee{constructor(t){t&&this.set(t)}set(t,e,r){const n=this;function s(t,e,r){const s=Yt(e);if(!s)throw new Error("header name must be a non-empty string");const i=_t.findKey(n,s);(!i||void 0===n[i]||!0===r||void 0===r&&!1!==n[i])&&(n[i||e]=Zt(t))}const i=(t,e)=>_t.forEach(t,((t,r)=>s(t,r,e)));return _t.isPlainObject(t)||t instanceof this.constructor?i(t,e):_t.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim())?i((t=>{const e={};let r,n,s;return t&&t.split("\n").forEach((function(t){s=t.indexOf(":"),r=t.substring(0,s).trim().toLowerCase(),n=t.substring(s+1).trim(),!r||e[r]&&Xt[r]||("set-cookie"===r?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)})),e})(t),e):null!=t&&s(e,t,r),this}get(t,e){if(t=Yt(t)){const r=_t.findKey(this,t);if(r){const t=this[r];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}(t);if(_t.isFunction(e))return e.call(this,t,r);if(_t.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Yt(t)){const r=_t.findKey(this,t);return!(!r||void 0===this[r]||e&&!te(0,this[r],r,e))}return!1}delete(t,e){const r=this;let n=!1;function s(t){if(t=Yt(t)){const s=_t.findKey(r,t);!s||e&&!te(0,r[s],s,e)||(delete r[s],n=!0)}}return _t.isArray(t)?t.forEach(s):s(t),n}clear(t){const e=Object.keys(this);let r=e.length,n=!1;for(;r--;){const s=e[r];t&&!te(0,this[s],s,t,!0)||(delete this[s],n=!0)}return n}normalize(t){const e=this,r={};return _t.forEach(this,((n,s)=>{const i=_t.findKey(r,s);if(i)return e[i]=Zt(n),void delete e[s];const o=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((t,e,r)=>e.toUpperCase()+r))}(s):String(s).trim();o!==s&&delete e[s],e[o]=Zt(n),r[o]=!0})),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return _t.forEach(this,((r,n)=>{null!=r&&!1!==r&&(e[n]=t&&_t.isArray(r)?r.join(", "):r)})),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([t,e])=>t+": "+e)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const r=new this(t);return e.forEach((t=>r.set(t))),r}static accessor(t){const e=(this[Qt]=this[Qt]={accessors:{}}).accessors,r=this.prototype;function n(t){const n=Yt(t);e[n]||(!function(t,e){const r=_t.toCamelCase(" "+e);["get","set","has"].forEach((n=>{Object.defineProperty(t,n+r,{value:function(t,r,s){return this[n].call(this,e,t,r,s)},configurable:!0})}))}(r,t),e[n]=!0)}return _t.isArray(t)?t.forEach(n):n(t),this}}ee.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),_t.freezeMethods(ee.prototype),_t.freezeMethods(ee);const re=ee;function ne(t,e){const r=this||Vt,n=e||r,s=re.from(n.headers);let i=n.data;return _t.forEach(t,(function(t){i=t.call(r,i,s.normalize(),e?e.status:void 0)})),s.normalize(),i}function se(t){return!(!t||!t.__CANCEL__)}function ie(t,e,r){Nt.call(this,null==t?"canceled":t,Nt.ERR_CANCELED,e,r),this.name="CanceledError"}_t.inherits(ie,Nt,{__CANCEL__:!0});const oe=ie;const ae=Kt.isStandardBrowserEnv?{write:function(t,e,r,n,s,i){const o=[];o.push(t+"="+encodeURIComponent(e)),_t.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),_t.isString(n)&&o.push("path="+n),_t.isString(s)&&o.push("domain="+s),!0===i&&o.push("secure"),document.cookie=o.join("; ")},read:function(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function ce(t,e){return t&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)?function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}const ue=Kt.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let r;function n(r){let n=r;return t&&(e.setAttribute("href",n),n=e.href),e.setAttribute("href",n),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return r=n(window.location.href),function(t){const e=_t.isString(t)?n(t):t;return e.protocol===r.protocol&&e.host===r.host}}():function(){return!0};const he=function(t,e){t=t||10;const r=new Array(t),n=new Array(t);let s,i=0,o=0;return e=void 0!==e?e:1e3,function(a){const c=Date.now(),u=n[o];s||(s=c),r[i]=a,n[i]=c;let h=o,l=0;for(;h!==i;)l+=r[h++],h%=t;if(i=(i+1)%t,i===o&&(o=(o+1)%t),c-s<e)return;const f=u&&c-u;return f?Math.round(1e3*l/f):void 0}};function le(t,e){let r=0;const n=he(50,250);return s=>{const i=s.loaded,o=s.lengthComputable?s.total:void 0,a=i-r,c=n(a);r=i;const u={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&i<=o?(o-i)/c:void 0,event:s};u[e?"download":"upload"]=!0,t(u)}}const fe={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(t){return new Promise((function(e,r){let n=t.data;const s=re.from(t.headers).normalize(),i=t.responseType;let o;function a(){t.cancelToken&&t.cancelToken.unsubscribe(o),t.signal&&t.signal.removeEventListener("abort",o)}_t.isFormData(n)&&(Kt.isStandardBrowserEnv||Kt.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.setContentType("multipart/form-data;",!1));let c=new XMLHttpRequest;if(t.auth){const e=t.auth.username||"",r=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(e+":"+r))}const u=ce(t.baseURL,t.url);function h(){if(!c)return;const n=re.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());!function(t,e,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?e(new Nt("Request failed with status code "+r.status,[Nt.ERR_BAD_REQUEST,Nt.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):t(r)}((function(t){e(t),a()}),(function(t){r(t),a()}),{data:i&&"text"!==i&&"json"!==i?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:n,config:t,request:c}),c=null}if(c.open(t.method.toUpperCase(),Mt(u,t.params,t.paramsSerializer),!0),c.timeout=t.timeout,"onloadend"in c?c.onloadend=h:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(h)},c.onabort=function(){c&&(r(new Nt("Request aborted",Nt.ECONNABORTED,t,c)),c=null)},c.onerror=function(){r(new Nt("Network Error",Nt.ERR_NETWORK,t,c)),c=null},c.ontimeout=function(){let e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const n=t.transitional||zt;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),r(new Nt(e,n.clarifyTimeoutError?Nt.ETIMEDOUT:Nt.ECONNABORTED,t,c)),c=null},Kt.isStandardBrowserEnv){const e=(t.withCredentials||ue(u))&&t.xsrfCookieName&&ae.read(t.xsrfCookieName);e&&s.set(t.xsrfHeaderName,e)}void 0===n&&s.setContentType(null),"setRequestHeader"in c&&_t.forEach(s.toJSON(),(function(t,e){c.setRequestHeader(e,t)})),_t.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),i&&"json"!==i&&(c.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&c.addEventListener("progress",le(t.onDownloadProgress,!0)),"function"==typeof t.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",le(t.onUploadProgress)),(t.cancelToken||t.signal)&&(o=e=>{c&&(r(!e||e.type?new oe(null,t,c):e),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(o),t.signal&&(t.signal.aborted?o():t.signal.addEventListener("abort",o)));const l=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(u);l&&-1===Kt.protocols.indexOf(l)?r(new Nt("Unsupported protocol "+l+":",Nt.ERR_BAD_REQUEST,t)):c.send(n||null)}))}};_t.forEach(fe,((t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(t){}Object.defineProperty(t,"adapterName",{value:e})}}));const de=t=>{t=_t.isArray(t)?t:[t];const{length:e}=t;let r,n;for(let s=0;s<e&&(r=t[s],!(n=_t.isString(r)?fe[r.toLowerCase()]:r));s++);if(!n){if(!1===n)throw new Nt(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT");throw new Error(_t.hasOwnProp(fe,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`)}if(!_t.isFunction(n))throw new TypeError("adapter is not a function");return n};function pe(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new oe(null,t)}function ge(t){pe(t),t.headers=re.from(t.headers),t.data=ne.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1);return de(t.adapter||Vt.adapter)(t).then((function(e){return pe(t),e.data=ne.call(t,t.transformResponse,e),e.headers=re.from(e.headers),e}),(function(e){return se(e)||(pe(t),e&&e.response&&(e.response.data=ne.call(t,t.transformResponse,e.response),e.response.headers=re.from(e.response.headers))),Promise.reject(e)}))}const me=t=>t instanceof re?t.toJSON():t;function we(t,e){e=e||{};const r={};function n(t,e,r){return _t.isPlainObject(t)&&_t.isPlainObject(e)?_t.merge.call({caseless:r},t,e):_t.isPlainObject(e)?_t.merge({},e):_t.isArray(e)?e.slice():e}function s(t,e,r){return _t.isUndefined(e)?_t.isUndefined(t)?void 0:n(void 0,t,r):n(t,e,r)}function i(t,e){if(!_t.isUndefined(e))return n(void 0,e)}function o(t,e){return _t.isUndefined(e)?_t.isUndefined(t)?void 0:n(void 0,t):n(void 0,e)}function a(r,s,i){return i in e?n(r,s):i in t?n(void 0,r):void 0}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(t,e)=>s(me(t),me(e),!0)};return _t.forEach(Object.keys(Object.assign({},t,e)),(function(n){const i=c[n]||s,o=i(t[n],e[n],n);_t.isUndefined(o)&&i!==a||(r[n]=o)})),r}const ye="1.4.0",be={};["object","boolean","number","function","string","symbol"].forEach(((t,e)=>{be[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}}));const Ee={};be.transitional=function(t,e,r){function n(t,e){return"[Axios v1.4.0] Transitional option '"+t+"'"+e+(r?". "+r:"")}return(r,s,i)=>{if(!1===t)throw new Nt(n(s," has been removed"+(e?" in "+e:"")),Nt.ERR_DEPRECATED);return e&&!Ee[s]&&(Ee[s]=!0,console.warn(n(s," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(r,s,i)}};const ve={assertOptions:function(t,e,r){if("object"!=typeof t)throw new Nt("options must be an object",Nt.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const i=n[s],o=e[i];if(o){const e=t[i],r=void 0===e||o(e,i,t);if(!0!==r)throw new Nt("option "+i+" must be "+r,Nt.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new Nt("Unknown option "+i,Nt.ERR_BAD_OPTION)}},validators:be},Ae=ve.validators;class Se{constructor(t){this.defaults=t,this.interceptors={request:new $t,response:new $t}}request(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},e=we(this.defaults,e);const{transitional:r,paramsSerializer:n,headers:s}=e;let i;void 0!==r&&ve.assertOptions(r,{silentJSONParsing:Ae.transitional(Ae.boolean),forcedJSONParsing:Ae.transitional(Ae.boolean),clarifyTimeoutError:Ae.transitional(Ae.boolean)},!1),null!=n&&(_t.isFunction(n)?e.paramsSerializer={serialize:n}:ve.assertOptions(n,{encode:Ae.function,serialize:Ae.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase(),i=s&&_t.merge(s.common,s[e.method]),i&&_t.forEach(["delete","get","head","post","put","patch","common"],(t=>{delete s[t]})),e.headers=re.concat(i,s);const o=[];let a=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(a=a&&t.synchronous,o.unshift(t.fulfilled,t.rejected))}));const c=[];let u;this.interceptors.response.forEach((function(t){c.push(t.fulfilled,t.rejected)}));let h,l=0;if(!a){const t=[ge.bind(this),void 0];for(t.unshift.apply(t,o),t.push.apply(t,c),h=t.length,u=Promise.resolve(e);l<h;)u=u.then(t[l++],t[l++]);return u}h=o.length;let f=e;for(l=0;l<h;){const t=o[l++],e=o[l++];try{f=t(f)}catch(t){e.call(this,t);break}}try{u=ge.call(this,f)}catch(t){return Promise.reject(t)}for(l=0,h=c.length;l<h;)u=u.then(c[l++],c[l++]);return u}getUri(t){return Mt(ce((t=we(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}}_t.forEach(["delete","get","head","options"],(function(t){Se.prototype[t]=function(e,r){return this.request(we(r||{},{method:t,url:e,data:(r||{}).data}))}})),_t.forEach(["post","put","patch"],(function(t){function e(e){return function(r,n,s){return this.request(we(s||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}Se.prototype[t]=e(),Se.prototype[t+"Form"]=e(!0)}));const Re=Se;class Oe{constructor(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise((function(t){e=t}));const r=this;this.promise.then((t=>{if(!r._listeners)return;let e=r._listeners.length;for(;e-- >0;)r._listeners[e](t);r._listeners=null})),this.promise.then=t=>{let e;const n=new Promise((t=>{r.subscribe(t),e=t})).then(t);return n.cancel=function(){r.unsubscribe(e)},n},t((function(t,n,s){r.reason||(r.reason=new oe(t,n,s),e(r.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}static source(){let t;return{token:new Oe((function(e){t=e})),cancel:t}}}const Te=Oe;const _e={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(_e).forEach((([t,e])=>{_e[e]=t}));const ke=_e;const xe=function t(e){const r=new Re(e),n=G(Re.prototype.request,r);return _t.extend(n,Re.prototype,r,{allOwnKeys:!0}),_t.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return t(we(e,r))},n}(Vt);xe.Axios=Re,xe.CanceledError=oe,xe.CancelToken=Te,xe.isCancel=se,xe.VERSION=ye,xe.toFormData=Dt,xe.AxiosError=Nt,xe.Cancel=xe.CanceledError,xe.all=function(t){return Promise.all(t)},xe.spread=function(t){return function(e){return t.apply(null,e)}},xe.isAxiosError=function(t){return _t.isObject(t)&&!0===t.isAxiosError},xe.mergeConfig=we,xe.AxiosHeaders=re,xe.formToJSON=t=>Jt(_t.isHTMLForm(t)?new FormData(t):t),xe.HttpStatusCode=ke,xe.default=xe;const Ce=xe;var Ne=r(47);class Pe{_instance;cookieMap=new Map;config;constructor(t){t&&this.applyConfig(t)}applyConfig(t){this.config=this.mergeDefaults(t),this._instance=void 0}getConfig(){return this.config}async requestInterceptor(t){const e=this.cookieMap.get(new URL(t.baseURL??"").host);return e&&(t.headers.cookie=e),t}async responseInterceptor(t){const e=t.headers?.["set-cookie"];return e&&this.cookieMap.set(t.request.host,e),t}mergeDefaults(t){return t.headers??={},t.network&&!Object.keys(t.headers).includes("x-network")&&(t.headers["x-network"]=t.network),{url:t.url,timeout:t.timeout??2e4,logging:t.logging??!1,logger:t.logger??console.log,headers:{...t.headers,"x-irys-arweave-version":Ke.VERSION},withCredentials:t.withCredentials??!1,retry:{retries:3,maxTimeout:5e3}}}async get(t,e){try{return await this.request(t,{...e,method:"GET"})}catch(t){if(t.response?.status)return t.response;throw t}}async post(t,e,r){try{return await this.request(t,{data:e,...r,method:"POST"})}catch(t){if(t.response?.status)return t.response;throw t}}get instance(){if(this._instance)return this._instance;const t=Ce.create({baseURL:this.config.url.toString(),timeout:this.config.timeout,maxContentLength:536870912,headers:this.config.headers,withCredentials:this.config.withCredentials});return this.config.withCredentials&&(t.interceptors.request.use(this.requestInterceptor.bind(this)),t.interceptors.response.use(this.responseInterceptor.bind(this))),this.config.logging&&(t.interceptors.request.use((t=>(this.config.logger(`Requesting: ${t.baseURL}/${t.url}`),t))),t.interceptors.response.use((t=>(this.config.logger(`Response: ${t.config.url} - ${t.status}`),t)))),this._instance=t}async request(t,e){const r=this.instance,n=e?.url??new URL(t,this.config.url).toString();return Ne((t=>r({...e,url:n})),{...this.config.retry,...e?.retry})}}const Be=t=>"string"!=typeof t&&"url"in t,Ue={maxAttempts:15,randomlySelect:!0};const Le=class{minerInstances=[];globalConfig;gatewayInstances=[];constructor({gateways:t,miners:e,opts:r}){this.globalConfig=r?.globalConfig??{},e&&this.addMiners(e),t&&this.addGateways(t)}async addPeersFrom(t,e){const r=(await this.get("",{url:new URL("/peers",t).toString()})).data;this.addMiners(r.slice(0,e?.limit).map((t=>`http://${t}`)))}addMiners(t){t.forEach((t=>this.minerInstances.push(new Pe(Be(t)?t:{url:new URL(t),...this.globalConfig}))))}addGateways(t){t.forEach((t=>this.gatewayInstances.push(new Pe(Be(t)?t:{url:new URL(t),...this.globalConfig}))))}async get(t,e){return this.request(t,{...e,method:"GET"})}async post(t,e,r){return this.request(t,{data:e,...r,method:"POST"})}async request(t,e){const r={...Ue,...e?.fallback};let n=0;const s=[],i=e?.gatewayOnly?this.gatewayInstances:this.gatewayInstances.concat(this.minerInstances),o=Math.min(Math.max(r?.maxAttempts,1),i.length),a=r?.onFallback;if(0===i.length)throw new Error("Unable to run request due to 0 configured gateways/miners.");for(;n++<o;){const c=i.at(r?.randomlySelect?Math.floor(Math.random()*i.length):n-1);if(c)try{return await c.request(t,{...e})}catch(t){if(a?.(t,c),s.push(t),n>=o)throw t}}throw new Error("unreachable")}};class De{get(t,e){if(!Object.getOwnPropertyNames(this).includes(t))throw new Error(`Field "${t}" is not a property of the Arweave Transaction class.`);if(this[t]instanceof Uint8Array)return e&&e.decode&&e.string?k(this[t]):e&&e.decode&&!e.string?this[t]:B(this[t]);if(this[t]instanceof Array){if(void 0!==e?.decode||void 0!==e?.string)throw"tags"===t&&console.warn("Did you mean to use 'transaction[\"tags\"]' ?"),new Error("Cannot decode or stringify an array.");return this[t]}return e&&1==e.decode?e&&e.string?_(this[t]):N(this[t]):this[t]}}class je extends De{name;value;constructor(t,e){super(),this.name=t,this.value=e}}class Ie extends De{format=2;id="";last_tx="";owner="";tags=[];target="";quantity="0";data_size="0";data=new Uint8Array;data_root="";reward="0";signature="";merkle;deepHash;chunks;constructor({attributes:t,deps:e}){super(),this.merkle=e.merkle,this.deepHash=e.deepHash,Object.assign(this,t),"string"==typeof this.data&&(this.data=N(this.data)),t.tags&&(this.tags=t.tags)}addTag(t,e){this.tags.push({name:C(t),value:C(e)})}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:B(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setOwner(t){this.owner=t}setSignature({id:t,owner:e,reward:r,tags:n,signature:s}){this.id=t,this.owner=e,r&&(this.reward=r),n&&(this.tags=n),this.signature=s}async prepareChunks(t){!this.chunks&&t.byteLength>0&&(this.chunks=await this.merkle.generateTransactionChunks(t),this.data_root=B(this.chunks.data_root)),this.chunks||0!==t.byteLength||(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(t,e){if(!this.chunks)throw new Error("Chunks have not been prepared");const r=this.chunks.proofs[t],n=this.chunks.chunks[t];return{data_root:this.data_root,data_size:this.data_size,data_path:B(r.proof),offset:r.offset.toString(),chunk:B(e.slice(n.minByteRange,n.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:const t=this.tags.reduce(((t,e)=>T([t,N(e.name),N(e.value)])),new Uint8Array);return T([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),x(this.quantity),x(this.reward),this.get("last_tx",{decode:!0,string:!1}),t]);case 2:this.data_root||await this.prepareChunks(this.data);const e=this.tags.map((t=>[N(t.name),N(t.value)]));return await this.deepHash.deepHash([x(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),x(this.quantity),x(this.reward),this.get("last_tx",{decode:!0,string:!1}),e,x(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw new Error(`Unexpected transaction format: ${this.format}`)}}}class He{api;constructor(t){this.api=t}getInfo(){return this.api.get("info").then((t=>t.data))}getPeers(){return this.api.get("peers").then((t=>t.data))}}const Fe=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"];class qe{chunkIndex=0;txPosted=!1;transaction;lastRequestTimeEnd=0;totalErrors=0;data;lastResponseStatus=0;lastResponseError="";get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}crypto;api;merkle;deepHash;constructor({deps:t,transaction:e}){if(!e.id)throw new Error("Transaction is not signed");if(!e.chunks)throw new Error("Transaction chunks not prepared");this.api=t.api,this.crypto=t.crypto,this.merkle=t.merkle,this.deepHash=t.deepHash,this.data=e.data,this.transaction=new Ie({attributes:Object.assign({},e,{data:new Uint8Array(0)}),deps:{merkle:t.merkle,deepHash:t.deepHash}})}async uploadChunk(t){if(this.isComplete)throw new Error("Upload is already complete");if(""!==this.lastResponseError?this.totalErrors++:this.totalErrors=0,100===this.totalErrors)throw new Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let e=""===this.lastResponseError?0:Math.max(this.lastRequestTimeEnd+4e4-Date.now(),4e4);if(e>0&&(e-=e*Math.random()*.3,await new Promise((t=>setTimeout(t,e)))),this.lastResponseError="",!this.txPosted)return void await this.postTransaction();t&&(this.chunkIndex=t);const r=this.transaction.getChunk(t||this.chunkIndex,this.data);if(!await this.merkle.validatePath(this.transaction.chunks.data_root,parseInt(r.offset),0,parseInt(r.data_size),N(r.data_path)))throw new Error(`Unable to validate chunk ${this.chunkIndex}`);const s=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch((t=>(console.error(t.message),{status:-1,data:{error:t.message}})));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=s.status,200==this.lastResponseStatus)this.chunkIndex++;else if(this.lastResponseError=n(s),Fe.includes(this.lastResponseError))throw new Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized({serialized:t,data:e,deps:r}){if(!t||"number"!=typeof t.chunkIndex||"object"!=typeof t.transaction)throw new Error("Serialized object does not match expected format.");const n=new Ie(t.transaction);n.chunks||await n.prepareChunks(e);const s=new qe({deps:r,transaction:n});if(s.chunkIndex=t.chunkIndex,s.lastRequestTimeEnd=t.lastRequestTimeEnd,s.lastResponseError=t.lastResponseError,s.lastResponseStatus=t.lastResponseStatus,s.txPosted=t.txPosted,s.data=e,s.transaction.data_root!==t.transaction.data_root)throw new Error("Data mismatch: Uploader doesn't match provided data.");return s}static async fromTransactionId(t,e){const r=await t.get(`tx/${e}`);if(200!==r.status)throw new Error(`Tx ${e} not found: ${r.status}`);const n=r.data;n.data=new Uint8Array(0);return{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:n}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=1){this.transaction.data=this.data;const t=await this.api.post("tx",this.transaction).catch((t=>(console.error(t),{status:-1,data:{error:t.message}})));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=t.status,this.transaction.data=new Uint8Array(0),t.status>=200&&t.status<300)return this.txPosted=!0,void(this.chunkIndex=1);throw this.lastResponseError=n(t),new Error(`Unable to upload transaction: ${t.status}, ${this.lastResponseError}`)}const t=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=t.status,!(t.status>=200&&t.status<300))throw this.lastResponseError=n(t),new Error(`Unable to upload transaction: ${t.status}, ${this.lastResponseError}`);this.txPosted=!0}}class Me{api;crypto;chunks;merkle;deepHash;constructor({deps:t}){this.api=t.api,this.crypto=t.crypto,this.chunks=t.chunks,this.merkle=t.merkle,this.deepHash=t.deepHash}getTransactionAnchor(){return this.api.get("tx_anchor",{transformResponse:[]}).then((t=>t.data))}getPrice(t,e){const r=e?`price/${t}/${e}`:`price/${t}`;return this.api.get(r,{transformResponse:[function(t){return t}]}).then((t=>t.data))}async get(t){const r=await this.api.get(`tx/${t}`);if(200==r.status){const e=parseInt(r.data.data_size);if(r.data.format>=2&&e>0&&e<=12582912){const e=await this.getData(t);return new Ie({attributes:{...r.data,data:e},deps:{merkle:this.merkle,deepHash:this.deepHash}})}return new Ie({attributes:{...r.data,format:r.data.format||1},deps:{merkle:this.merkle,deepHash:this.deepHash}})}if(404===r.status)throw new e("TX_NOT_FOUND");if(410===r.status)throw new e("TX_FAILED");throw new e("TX_INVALID")}fromRaw(t){return new Ie({attributes:t,deps:{merkle:this.merkle,deepHash:this.deepHash}})}getStatus(t){return this.api.get(`tx/${t}/status`).then((t=>200===t.status?{status:200,confirmed:t.data}:{status:t.status,confirmed:null}))}async getData(t){let e;try{e=(await this.api.get(`/${t}`,{responseType:"arraybuffer"})).data}catch(e){console.error(`Error while trying to download contiguous data from gateway cache for ${t}`),console.error(e)}if(!e){console.warn(`Falling back to chunks for ${t}`);try{e=await this.chunks.downloadChunkedData(t)}catch(e){console.error(`Error while trying to download chunked data for ${t}`),console.error(e)}}if(!e)throw new Error(`${t} data was not found!`);return e}async getDataStream(t){let e;try{const r=(await this.api.get(`/${t}`,{responseType:"arraybuffer"})).data;e=async function*(){yield r}()}catch(e){console.error(`Error while trying to download contiguous data from gateway cache for ${t}`),console.error(e)}if(!e){console.warn(`Falling back to chunks for ${t}`);try{e=this.chunks.concurrentChunkDownloader(t)}catch(e){console.error(`Error while trying to download chunked data for ${t}`),console.error(e)}}if(!e)throw new Error(`${t} data was not found!`);return e}async sign(t,e,r){const n="object"==typeof e&&(t=>{let e=!0;return["n","e","d","p","q","dp","dq","qi"].map((r=>!(r in t)&&(e=!1))),e})(e),s="object"==typeof arweaveWallet;if(!n&&!s)throw new Error("No valid JWK or external wallet found to sign transaction.");if(s){try{(await arweaveWallet.getPermissions()).includes("SIGN_TRANSACTION")||await arweaveWallet.connect(["SIGN_TRANSACTION"])}catch{}t.tags=t.tags.map((t=>new je(t.name,t.value)));const e=await arweaveWallet.sign(t,r);t.setSignature({id:e.id,owner:e.owner,reward:e.reward,tags:e.tags,signature:e.signature})}else{if(!n)throw new Error("An error occurred while signing. Check wallet is valid");{t.setOwner(e.n);const n=await t.getSignatureData(),s=await this.crypto.sign(e,n,r),i=await this.crypto.hash(s);t.setSignature({id:B(i),owner:e.n,signature:B(s)})}}}async verify(t){const e=await t.getSignatureData(),r=t.get("signature",{decode:!0,string:!1}),n=B(await this.crypto.hash(r));if(t.id!==n)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(t.owner,e,r)}async post(t){if("string"==typeof t?t=new Ie({attributes:JSON.parse(t),deps:{merkle:this.merkle,deepHash:this.deepHash}}):"function"==typeof t.readInt32BE?t=new Ie({attributes:JSON.parse(t.toString()),deps:{merkle:this.merkle,deepHash:this.deepHash}}):"object"!=typeof t||t instanceof Ie||(t=new Ie({attributes:t,deps:{merkle:this.merkle,deepHash:this.deepHash}})),!(t instanceof Ie))throw new Error("Must be Transaction object");t.chunks||await t.prepareChunks(t.data);const e=await this.getUploader(t,t.data);try{for(;!e.isComplete;)await e.uploadChunk()}catch(t){if(e.lastResponseStatus>0)return{status:e.lastResponseStatus,statusText:e.lastResponseError,data:{error:e.lastResponseError}};throw t}return{status:200,statusText:"OK",data:{}}}async getUploader(t,e){let r;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),t instanceof Ie){if(e||(e=t.data),!(e instanceof Uint8Array))throw new Error("Data format is invalid");t.chunks||await t.prepareChunks(e),r=new qe({transaction:t,deps:{api:this.api,crypto:this.crypto,merkle:this.merkle,deepHash:this.deepHash}}),r.data&&0!==r.data.length||(r.data=e)}else{if("string"==typeof t&&(t=await qe.fromTransactionId(this.api,t)),!(e&&e instanceof Uint8Array))throw new Error("Must provide data when resuming upload");r=await qe.fromSerialized({deps:{api:this.api,merkle:this.merkle,crypto:this.crypto,deepHash:this.deepHash},serialized:t,data:e})}return r}async*upload(t,e){const r=await this.getUploader(t,e);for(;!r.isComplete;)await r.uploadChunk(),yield r;return r}}class $e{api;crypto;constructor(t,e){this.api=t,this.crypto=e}getBalance(t){return this.api.get(`wallet/${t}/balance`,{transformResponse:[function(t){return t}]}).then((t=>t.data))}getLastTransactionID(t){return this.api.get(`wallet/${t}/last_tx`).then((t=>t.data))}generate(){return this.crypto.generateJWK()}async jwkToAddress(t){return t&&"use_wallet"!==t?this.getAddress(t):this.getAddress()}async getAddress(t){if(t&&"use_wallet"!==t)return this.ownerToAddress(t.n);try{await arweaveWallet.connect(["ACCESS_ADDRESS"])}catch{}return arweaveWallet.getActiveAddress()}async ownerToAddress(t){return B(await this.crypto.hash(N(t)))}}class ze{config;api;wallets;transactions;network;blocks;chunks;static init;static utils=t;crypto;deepHash;merkle;static VERSION="0.0.1";constructor(t){if(this.config=t,!t.crypto)throw new Error("config.crypto is required");this.crypto=function(t,e){const r=t;return r.deepHash=new e.deepHash({deps:{utils:{stringToBuffer:x,concatBuffers:T},crypto:t}}),r}(t.crypto,{deepHash:J}),this.deepHash=this.crypto.deepHash;const e=t.gateways?Array.isArray(t.gateways)?t.gateways:[t.gateways]:void 0;this.api=new Le({gateways:e,miners:t.miners}),this.wallets=new $e(this.api,this.crypto),this.chunks=new K(this.api),this.network=new He(this.api),this.blocks=new s(this.api,this.network),this.merkle=new z({deps:{crypto:this.crypto}}),this.transactions=new Me({deps:{api:this.api,crypto:t.crypto,chunks:this.chunks,merkle:this.merkle,deepHash:this.deepHash}})}get utils(){return ze.utils}getConfig(){return this.config}async createTransaction(t,e){const r={};if(Object.assign(r,t),!(t.data||t.target&&t.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(null==t.owner&&e&&"use_wallet"!==e&&(r.owner=e.n),null==t.last_tx&&(r.last_tx=await this.transactions.getTransactionAnchor()),"string"==typeof t.data&&(t.data=x(t.data)),t.data instanceof ArrayBuffer&&(t.data=new Uint8Array(t.data)),t.data&&!(t.data instanceof Uint8Array))throw new Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(null==t.reward){const e=t.data?t.data.byteLength:0;r.reward=await this.transactions.getPrice(e,r.target)}r.data_root="",r.data_size=t.data?t.data.byteLength.toString():"0",r.data=t.data||new Uint8Array(0);const n=new Ie({attributes:r,deps:{merkle:this.merkle,deepHash:this.deepHash}});return await n.getSignatureData(),n}}const Ke=ze;class Je{keyLength=4096;publicExponent=65537;hashAlgorithm="sha256";driver;constructor(){this.driver=crypto?.subtle}async generateJWK(){const t=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),e=await this.driver.exportKey("jwk",t.privateKey);return{kty:e.kty,e:e.e,n:e.n,d:e.d,p:e.p,q:e.q,dp:e.dp,dq:e.dq,qi:e.qi}}async sign(t,e,{saltLength:r}={saltLength:32}){const n=await this.driver.sign({name:"RSA-PSS",saltLength:r},await this.jwkToCryptoKey(t),e);return new Uint8Array(n)}async hash(t,e="SHA-256"){const r=await this.driver.digest(e,t);return new Uint8Array(r)}async verify(t,e,r){const n={kty:"RSA",e:"AQAB",n:t},s=await this.jwkToPublicCryptoKey(n),i=await this.driver.digest("SHA-256",e),o=await this.driver.verify({name:"RSA-PSS",saltLength:0},s,r,e),a=await this.driver.verify({name:"RSA-PSS",saltLength:32},s,r,e),c=await this.driver.verify({name:"RSA-PSS",saltLength:Math.ceil((s.algorithm.modulusLength-1)/8)-i.byteLength-2},s,r,e);return o||a||c}async jwkToCryptoKey(t){return this.driver.importKey("jwk",t,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(t){return this.driver.importKey("jwk",t,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}async encrypt(t,e,r){const n=await this.driver.importKey("raw","string"==typeof e?x(e):e,{name:"PBKDF2",length:32},!1,["deriveKey"]),s=await this.driver.deriveKey({name:"PBKDF2",salt:x(r||"salt"),iterations:1e5,hash:"SHA-256"},n,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),i=new Uint8Array(16);crypto.getRandomValues(i);return T([i,await this.driver.encrypt({name:"AES-CBC",iv:i},s,t)])}async decrypt(t,e,r){const n=await this.driver.importKey("raw","string"==typeof e?x(e):e,{name:"PBKDF2",length:32},!1,["deriveKey"]),s=await this.driver.deriveKey({name:"PBKDF2",salt:x(r||"salt"),iterations:1e5,hash:"SHA-256"},n,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),i=t.slice(0,16);return T([await this.driver.decrypt({name:"AES-CBC",iv:i},s,t.slice(16))])}}class Ge extends ze{constructor(t,e){super({crypto:e?.crypto??new Je,...e,gateways:t??"https://arweave.net"})}static init(t){return new Ge(t)}}const We=Ge;"object"==typeof globalThis?globalThis.Arweave=We:"object"==typeof self&&(self.Arweave=We)})()})();
//# sourceMappingURL=web.bundle.min.js.map